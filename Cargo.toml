[package]
name = "pkgbob"
description = "A pkgsrc package builder"
version = "0.4.0"
authors = ["Jonathan Perkin <jonathan@perkin.org.uk>"]
keywords = ["cli", "pkgsrc"]
license = "ISC"
repository = "https://github.com/jperkin/bob"
homepage = "https://github.com/jperkin/bob"
documentation = "https://docs.rs/pkgbob"
rust-version = "1.85.1"
edition = "2024"

[lib]
name = "bob"
path = "src/lib.rs"

[[bin]]
name = "bob"
path = "src/main.rs"

[dependencies]
anyhow = "1.0.89"
clap = { version = "4.5", features = ["derive"] }
copy_dir = "0.1"
libc = "0.2"
os_pipe = "1.2"
crossterm = "0.28"
strip-ansi-escapes = "0.2"
unicode-width = "0.2"
ctrlc = { version = "3.4", features = ["termination"] }
glob = "0.3"
indexmap = { version = "2.12.1", features = ["serde"] }
petgraph = "0.6.5"
pkgsrc = { version = "0.5.6", features = ["serde"] }
rusqlite = { version = "0.32", features = ["bundled"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
ratatui = "0.29"
rayon = "1.10.0"
rust-embed = "8.7.0"
thiserror = "1.0.64"
tracing = "0.1"
tracing-appender = "0.2"
tracing-subscriber = { version = "0.3", features = ["json", "env-filter"] }

# Use vendored Lua on platforms where lua-src supports building
[target.'cfg(not(target_os = "illumos"))'.dependencies]
mlua = { version = "0.10", features = ["lua54", "vendored", "send"] }

# Use system Lua on illumos (lua-src doesn't support it)
[target.'cfg(target_os = "illumos")'.dependencies]
mlua = { version = "0.10", features = ["lua54", "send"] }

[dev-dependencies]
tempfile = "3.24.0"
